buildscript {
	repositories{
        mavenLocal()
        mavenCentral()
        maven {
            url repositoryMavenCentral
        }
        maven {
            url 'https://repo1.maven.org/maven2/'
        }
	}
    dependencies {
        classpath("io.spring.gradle:dependency-management-plugin:1.0.9.RELEASE")
        classpath("org.springframework.boot:spring-boot-gradle-plugin:2.3.2.RELEASE")
    }
}


apply plugin: 'java'
apply plugin: 'io.spring.dependency-management'

sourceCompatibility = 1.8
targetCompatibility = 1.8

tasks.withType(JavaCompile) {
    options.compilerArgs << "-Xlint:unchecked" << "-Xlint:deprecation"
}

repositories {
    maven {
        url repositoryMavenCentral
    }
    maven {
        url 'https://repo1.maven.org/maven2/'
    }
}

dependencyManagement {
    resolutionStrategy {
        cacheChangingModulesFor 0, 'seconds'
    }
    imports {
        mavenBom "io.anyway.bigbang:framework-dependency-management:1.0.0-SNAPSHOT"
    }
}

configurations.all {
    resolutionStrategy.cacheChangingModulesFor 0, 'seconds'
    resolutionStrategy.cacheDynamicVersionsFor 0, 'seconds'
    exclude group: "org.springframework.cloud",module: "spring-cloud-starter-netflix-ribbon"
}

dependencies {
//    compile(project(":framework:kernel"))
    compile("org.springframework.cloud:spring-cloud-starter-gateway")
    compile("org.springframework.boot:spring-boot-starter-actuator")
    compile("io.micrometer:micrometer-registry-prometheus")
    compile("com.alibaba.cloud:spring-cloud-starter-alibaba-sentinel")
    compile("com.alibaba.cloud:spring-cloud-alibaba-sentinel-gateway")
    compile("org.springframework.cloud:spring-cloud-loadbalancer")
    annotationProcessor("org.projectlombok:lombok")
    compileOnly("org.projectlombok:lombok")
    testAnnotationProcessor("org.projectlombok:lombok")
    testCompileOnly("org.projectlombok:lombok")
}



